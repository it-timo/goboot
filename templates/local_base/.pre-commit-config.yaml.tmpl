#  -----------------------------------------------------------------------------
#  .pre-commit-config.yaml — Developer checks before commits for `{{ .ProjectName }}`
#  -----------------------------------------------------------------------------
#
#  All changes should be made by the developer — no auto-magic or format rewriting.
#
#  File generated by goboot — do not reuse blindly.
#  -----------------------------------------------------------------------------

repos:
  - repo: local
    hooks:
{{- $linters := index .CommitScripts "base_lint" -}}
{{- $tests := index .CommitScripts "base_test" -}}
{{- if or $linters $tests }}

{{- if $linters }}
      # Linters
{{- range $idx, $cmd := $linters }}
      - id: base_lint_{{ $idx }}
        name: base_lint_{{ $idx }}
        entry: |-
          bash -lc '
            set -euo pipefail
            ROOT_DIR="$(pwd)"
            DOCKER_RUN="docker run --rm -v ${ROOT_DIR}:/workdir -w /workdir"
            SH_FILES="$(find . -type f -name '\''*.sh'\'' | tr "\n" " ")"
{{ indent 12 (replace (replace $cmd "{{DOCKER_RUN}}" "${DOCKER_RUN}") "{{SH_FILES}}" "${SH_FILES}") }}
          '
        language: system
        pass_filenames: false
{{- end }}
{{- end }}

{{- if $tests }}
      # Tests
      - id: base_test_go
        name: base_test_go
        entry: |-
          bash -lc ' \
{{ indent 12 (index $tests 0) }}'
        language: system
        pass_filenames: false
{{- end }}

{{- else }}
      # (No linters or tests configured)
{{- end }}
